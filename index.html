<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Colin!</title>
    <link rel="stylesheet" type="text/css" href="./styles.css">  
</head>
<body>
    <div class="floating-hearts" id="hearts"></div>

    <section class="section hero">
        <div>
            <h1>Happy Birthday Colin!</h1>
            <p>A special day for the most special person</p>
        </div>
        <div class="scroll-indicator">
            <div>‚Üì Please scroll to explore your card ‚Üì</div>
        </div>
    </section>

    <section class="parallax-container memory-1">
        <div class="parallax-bg"></div>
        <div class="parallax-content">
            <div class="content-card">
                <h2>Your Adventures</h2>
                <p>Remember all those amazing places we've explored together? Every adventure with you has been a treasure, filled with laughter and unforgettable moments.</p>
            </div>
        </div>
    </section>

    <section class="carousel-section">
        <div class="carousel-container">
            <h2 class="carousel-title">Our Beautiful Memories</h2>
            <main class="carousel-main">
                <ul class='slider'>
                  <li class='item' style="background-image: url('images/3.JPG')">
                    <div class='content'>
                      <h2 class='title'>"Adventure Awaits"</h2>
                      <p class='description'>Every journey we've taken together has been filled with wonder and discovery. From mountain peaks to city streets, you make every moment special.</p>
                      <button>Remember This</button>
                    </div>
                  </li>
                  <li class='item' style="background-image: url('images/4.JPG')">
                    <div class='content'>
                      <h2 class='title'>"Peaceful Moments"</h2>
                      <p class='description'>The quiet times we share are just as precious as the exciting ones. Your presence brings calm to even the busiest days.</p>
                      <button>Remember This</button>
                    </div>
                  </li>
                  <li class='item' style="background-image: url('images/2.jpg')">
                    <div class='content'>
                      <h2 class='title'>"Nature's Beauty"</h2>
                      <p class='description'>You have this amazing ability to find beauty in everything around us. Through your eyes, the world becomes more magical.</p>
                      <button>Remember This</button>
                    </div>
                  </li>
                  <li class='item' style="background-image: url('images/1.jpg')">
                    <div class='content'>
                      <h2 class='title'>"Golden Hours"</h2>
                      <p class='description'>Those perfect moments when everything feels just right. Your laughter during golden hour is one of my favorite sounds in the world.</p>
                      <button>Remember This</button>
                    </div>
                  </li> 
                  <li class='item' style="background-image: url('images/9.JPG')">
                    <div class='content'>
                      <h2 class='title'>"Urban Explorations"</h2>
                      <p class='description'>City adventures with you are always exciting. You turn ordinary streets into extraordinary memories with your curiosity and joy.</p>
                      <button>Remember This</button>  
                    </div>
                  </li>
                  <li class='item' style="background-image: url('images/8.JPG')">
                    <div class='content'>
                      <h2 class='title'>"Dreamy Destinations"</h2>
                      <p class='description'>Every place becomes more beautiful when experienced with you. Your sense of wonder transforms the ordinary into the extraordinary.</p>
                      <button>Remember This</button>
                    </div>
                  </li>
                </ul>
                <nav class='nav'>
                  <ion-icon class='btn prev' name="arrow-back-outline"></ion-icon>
                  <ion-icon class='btn next' name="arrow-forward-outline"></ion-icon>
                </nav>
            </main>
        </div>
    </section>

    <section class="parallax-container memory-2">
        <div class="parallax-bg"></div>
        <div class="parallax-content">
            <div class="content-card">
                <h2>Your Passions</h2>
                <p>The way your eyes light up when you talk about the things you love is one of my favorite sights. Your passion and enthusiasm inspire everyone around you.</p>
            </div>
        </div>
    </section>

    <section class="parallax-container memory-3">
        <div class="parallax-bg"></div>
        <div class="parallax-content">
            <div class="content-card">
                <h2>Your Kindness</h2>
                <p>Your heart is as beautiful as your smile. The way you care for others and spread joy wherever you go makes the world a brighter place.</p>
            </div>
        </div>
    </section>

    <section class="letter-section">
        <div class="letter">
            <h2>Dear Birthday Star,</h2>
            <p>On this special day, I want you to know how grateful I am to have you in my life. You bring so much joy, laughter, and light to everyone around you.</p>
            
            <p>Your kindness knows no bounds, your smile can brighten even the darkest days, and your spirit is absolutely contagious. Watching you pursue your dreams and passions with such dedication inspires me every single day.</p>
            
            <p>As you celebrate another year of life, I hope you know how loved and appreciated you are. May this new year bring you endless happiness, exciting adventures, and all the wonderful things your heart desires.</p>
            
            <p>Here's to another year of amazing memories, inside jokes, and all the little moments that make life so special. You deserve all the happiness in the world!</p>
            
            <div class="signature">With all my love,<br>Your biggest fan ‚ù§Ô∏è</div>
        </div>
    </section>

    <section class="cake-section">
        <div class="cake-container">
            <h2 class="cake-title">Make a Wish!</h2>
            <div class="cake">
                <div class="cake-layer cake-bottom">
                    <div class="frosting"></div>
                </div>
                <div class="cake-layer cake-middle">
                    <div class="frosting"></div>
                </div>
                <div class="cake-layer cake-top">
                    <div class="frosting"></div>
                    <div class="candles">
                        <div class="candle">
                            <div class="flame"></div>
                        </div>
                        <div class="candle">
                            <div class="flame"></div>
                        </div>
                        <div class="candle">
                            <div class="flame"></div>
                        </div>
                        <div class="candle">
                            <div class="flame"></div>
                        </div>
                        <div class="candle">
                            <div class="flame"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="audio-controls">
                <button class="audio-btn" id="blowBtn">üé§ Blow Out the Candles!</button>
                <div class="volume-indicator">
                    <div class="volume-bar" id="volumeBar"></div>
                </div>
                <p class="instructions">Click the button and blow into your microphone to make a wish!</p>
            </div>
        </div>
    </section>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script>
        // Parallax effect
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallaxElements = document.querySelectorAll('.parallax-bg');
            
            parallaxElements.forEach(element => {
                const speed = 0.5;
                const yPos = -(scrolled * speed);
                element.style.transform = `translate3d(0, ${yPos}px, 0)`;
            });
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.3,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Observe all content cards and letter
        document.querySelectorAll('.content-card, .letter, .cake-container, .carousel-container').forEach(el => {
            observer.observe(el);
        });

        // Carousel functionality
        const slider = document.querySelector('.slider');
        
        function activate(e) {
            const items = document.querySelectorAll('.carousel-section .item');
            e.target.matches('.next') && slider.append(items[0])
            e.target.matches('.prev') && slider.prepend(items[items.length-1]);
        }

        document.addEventListener('click', activate, false);

        // Audio recognition for candle blowing
        let mediaRecorder;
        let audioContext;
        let analyser;
        let dataArray;
        let isListening = false;
        let candlesBlown = false;

        const blowBtn = document.getElementById('blowBtn');
        const volumeBar = document.getElementById('volumeBar');
        const flames = document.querySelectorAll('.flame');

        blowBtn.addEventListener('click', toggleListening);

        async function toggleListening() {
            if (!isListening) {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    startListening(stream);
                } catch (err) {
                    alert('Please allow microphone access to blow out the candles!');
                }
            } else {
                stopListening();
            }
        }

        function startListening(stream) {
            isListening = true;
            blowBtn.textContent = 'üé§ Listening... Blow now!';
            blowBtn.classList.add('listening');

            // Create audio context and analyser
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            const source = audioContext.createMediaStreamSource(stream);
            source.connect(analyser);

            analyser.fftSize = 256;
            const bufferLength = analyser.frequencyBinCount;
            dataArray = new Uint8Array(bufferLength);

            // Start monitoring audio levels
            monitorAudio();

            // Store stream for cleanup
            blowBtn.stream = stream;
        }

        function stopListening() {
            isListening = false;
            blowBtn.textContent = 'üé§ Blow Out the Candles!';
            blowBtn.classList.remove('listening');
            
            if (blowBtn.stream) {
                blowBtn.stream.getTracks().forEach(track => track.stop());
            }
            if (audioContext) {
                audioContext.close();
            }
        }

        function monitorAudio() {
            if (!isListening) return;

            analyser.getByteFrequencyData(dataArray);
            
            // Calculate volume level
            let sum = 0;
            for (let i = 0; i < dataArray.length; i++) {
                sum += dataArray[i];
            }
            const average = sum / dataArray.length;
            const volume = (average / 255) * 100;

            // Update volume bar
            volumeBar.style.width = volume + '%';

            // Check if volume is high enough (blowing sound)
            if (volume > 20 && !candlesBlown) {
                blowOutCandles();
            }

            // Continue monitoring
            requestAnimationFrame(monitorAudio);
        }

        function blowOutCandles() {
            candlesBlown = true;
            
            // Blow out candles with delay
            flames.forEach((flame, index) => {
                setTimeout(() => {
                    flame.classList.add('blown');
                }, index * 200);
            });

            // Show wish message
            setTimeout(() => {
                const wishMessage = document.createElement('div');
                wishMessage.className = 'wish-message';
                wishMessage.textContent = '‚ú® Make a Wish! ‚ú®';
                document.querySelector('.cake-section').appendChild(wishMessage);
                
                // Stop listening
                setTimeout(() => {
                    stopListening();
                }, 2000);
            }, 1000);
        }

        // Floating hearts animation
        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = '‚ô•';
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDelay = Math.random() * 3 + 's';
            heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
            document.getElementById('hearts').appendChild(heart);

            // Remove heart after animation
            setTimeout(() => {
                heart.remove();
            }, 7000);
        }

        // Create hearts periodically
        setInterval(createHeart, 2000);

        // Smooth scrolling for better experience
        document.documentElement.style.scrollBehavior = 'smooth';
    </script>
</body>
</html>